(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,n){e.exports={chat:"Chat_chat__jDsTA",closeButton:"Chat_closeButton__1vziX"}},20:function(e,t,n){e.exports={loginForm:"LoginForm_loginForm__2EPlp",text:"LoginForm_text__3yW0k",input:"LoginForm_input__3B7Mn"}},24:function(e,t,n){e.exports={chatForm:"ChatForm_chatForm__3ys6k",chatInput:"ChatForm_chatInput__2yo6o"}},29:function(e,t,n){e.exports={container:"Container_container__LyA3g"}},38:function(e,t,n){},49:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(8),r=n.n(s),o=(n(38),n(29)),l=n.n(o),u=n(1),i=function(e){var t=e.children;return Object(u.jsx)("div",{className:l.a.container,children:t})},m=n(10),j=n(6),f=n(19),b=n.n(f),g=(n(40),n(18)),O=n(60),h=n(58),d=n(59),p=n(23),v=n.n(p),x=(n(49),function(e){var t=e.messages,n=e.username,a=Object(c.useRef)();return Object(c.useEffect)((function(){a.current.scrollTo({top:9999,behavior:"smooth"})})),Object(u.jsx)("ul",{className:"chatWindow",ref:a,children:t.map((function(e){var t=e.username===n?"you":"user",c="you"!==t&&"right";return Object(u.jsx)("li",{className:"item",children:"connection"===e.event?Object(u.jsxs)("p",{children:["\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ",e.username," \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u043b\u0441\u044f"]}):Object(u.jsxs)("p",{className:"".concat(c),children:[e.username,":"," ",Object(u.jsx)("span",{className:"".concat(t),children:e.message})]})},e.id)}))})}),S=n(24),y=n.n(S),_=n(61),N=n(62),k=function(e){var t=e.value,n=e.setValue,c=e.sendMessage,a=e.sendMessageEnter;return Object(u.jsxs)(_.a,{className:y.a.chatForm,children:[Object(u.jsx)(_.a.Control,{className:y.a.chatInput,type:"text",value:t,onChange:function(e){return n(e.target.value)},onKeyPress:a,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),Object(u.jsx)(N.a,{variant:"success",type:"button",onClick:c,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})},I=n(20),C=n.n(I),E=function(e){var t=e.username,n=e.setUsername,c=e.connect,a=e.connectEnterKey;return Object(u.jsx)(_.a,{className:C.a.loginForm,children:Object(u.jsxs)(_.a.Group,{controlId:"formBasicEmail",children:[Object(u.jsx)(_.a.Control,{className:C.a.input,type:"text",value:t,onChange:function(e){return n(e.target.value)},onKeyPress:a,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f"}),Object(u.jsx)(_.a.Text,{className:C.a.text,children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0443 \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0447\u0430\u0442\u0443"}),Object(u.jsx)(N.a,{variant:"success",type:"button",onClick:c,children:"\u0412\u043e\u0439\u0442\u0438"})]})})},J=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(j.a)(s,2),o=r[0],l=r[1],i=Object(c.useRef)(),f=Object(c.useState)(!1),p=Object(j.a)(f,2),S=p[0],y=p[1],_=Object(c.useState)(""),N=Object(j.a)(_,2),I=N[0],C=N[1];Object(c.useEffect)((function(){var e=localStorage.getItem("messages");if(e){var t=JSON.parse(e);a(Object(m.a)(t))}}),[]),Object(c.useEffect)((function(){var e=localStorage.getItem("name");e&&C(JSON.parse(e))}),[]),Object(c.useEffect)((function(){var e=localStorage.getItem("connected");null!==e&&"false"!==e&&(y(!0),i.current=new WebSocket("wss://websocket-chat-react.herokuapp.com/"),i.current.onmessage=function(e){var t=JSON.parse(e.data);a((function(e){return[].concat(Object(m.a)(e),[t])}))})}),[]);var J=function(){i.current=new WebSocket("wss://websocket-chat-react.herokuapp.com/"),""!==I.trim()?(i.current.onopen=function(){y(!0),B(),M(I),console.log("\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e!");var e={id:v.a.generate(),event:"connection",username:I};i.current.send(JSON.stringify(e))},i.current.onmessage=function(e){var t=JSON.parse(e.data);a((function(e){return[].concat(Object(m.a)(e),[t])}))},i.current.onclose=function(){console.log("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435")},i.current.onerror=function(){console.log("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}):g.b.error("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f!",{theme:"colored"})},F=function(){if(""!==o.trim()){var e={id:v.a.generate(),event:"message",message:o,username:I};i.current.send(JSON.stringify(e)),w(e),l("")}},w=function(e){var t=localStorage.getItem("messages");if(null!==t){var n=JSON.parse(t);n.push(e),localStorage.setItem("messages",JSON.stringify(n))}else localStorage.setItem("messages",JSON.stringify([e]))},B=function(){null!==localStorage.getItem("connected")||localStorage.setItem("connected","true")},M=function(e){null!==localStorage.getItem("name")||localStorage.setItem("name",JSON.stringify(e))};return Object(u.jsxs)("div",{className:b.a.chatContainer,children:[!S&&Object(u.jsx)(E,{username:I,setUsername:C,connect:J,connectEnterKey:function(e){"Enter"===e.key&&(e.preventDefault(),J())}}),S&&Object(u.jsxs)("div",{className:b.a.chat,children:[Object(u.jsx)(x,{messages:n,username:I}),Object(u.jsx)(k,{value:o,setValue:l,sendMessage:F,sendMessageEnter:function(e){"Enter"===e.key&&(e.preventDefault(),F())}}),Object(u.jsx)(O.a,{overlay:Object(u.jsx)(h.a,{id:"tooltip-disabled",children:"\u0412\u044b\u0445\u043e\u0434"}),placement:"bottom",delay:{show:250,hide:400},children:Object(u.jsx)(d.a,{className:b.a.closeButton,onClick:function(){localStorage.clear(),y(!1),C(""),a([]),i.current.onmessage=null,i.current.onopen=null},"aria-label":"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(u.jsx)(g.a,{})]})};n(52);var F=function(){return Object(u.jsx)(i,{children:Object(u.jsx)(J,{})})};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(F,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.bc26601b.chunk.js.map